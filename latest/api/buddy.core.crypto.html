<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><title>buddy.core.crypto documentation</title></head><body><header><section class="title"><h1><a href="index.html">Buddy-core Api Documentation</a></h1></section><small>Version: 0.9.0</small></header><section class="container"><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>buddy</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></div></li><li class="depth-3 branch"><a href="buddy.core.bytes.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bytes</span></div></a></li><li class="depth-3 branch"><a href="buddy.core.codecs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>codecs</span></div></a></li><li class="depth-3 branch current"><a href="buddy.core.crypto.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>crypto</span></div></a></li><li class="depth-3 branch"><a href="buddy.core.dsa.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dsa</span></div></a></li><li class="depth-3 branch"><a href="buddy.core.hash.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>hash</span></div></a></li><li class="depth-3 branch"><a href="buddy.core.kdf.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kdf</span></div></a></li><li class="depth-3 branch"><a href="buddy.core.keys.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>keys</span></div></a></li><li class="depth-3 branch"><a href="buddy.core.mac.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mac</span></div></a></li><li class="depth-3 branch"><a href="buddy.core.nonce.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>nonce</span></div></a></li><li class="depth-3"><a href="buddy.core.padding.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>padding</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -331px;"><span class="top" style="height: 340px;"></span><span class="bottom"></span></span><span>util</span></div></div></li><li class="depth-3"><a href="buddy.util.deflate.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>deflate</span></div></a></li></ul></div><section class="namespace-docs" id="content"><h2 class="anchor" id="top">buddy.core.crypto</h2><div class="doc"><div class="markdown"><p>Crypto engines low-level abstraction.</p></div></div><div class="public anchor" id="var-block-cipher"><h3><a href="#var-block-cipher">block-cipher</a></h3><div class="usage"><code>(block-cipher alg mode)</code></div><div class="doc"><div class="markdown"><p>Block cipher engine constructor.</p></div></div><div class="src-link"><a href="http://github.com/funcool/buddy-core/blob/master/src/buddy/core/crypto.clj#L204">view source</a></div></div><div class="public anchor" id="var-calculate-authtag.21"><h3><a href="#var-calculate-authtag.21">calculate-authtag!</a></h3><div class="usage"><code>(calculate-authtag! engine output offset)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/funcool/buddy-core/blob/master/src/buddy/core/crypto.clj#L246">view source</a></div></div><div class="public anchor" id="var-decrypt"><h3><a href="#var-decrypt">decrypt</a></h3><div class="usage"><code>(decrypt input key iv)</code><code>(decrypt input key iv {:keys [algorithm], :or {algorithm :aes128-cbc-hmac-sha256}})</code></div><div class="doc"><div class="markdown"><p>Decrypt data encrypted using the <code>encrypt</code> function.</p><p>The input, key and iv parameters should be of any type that can be coerced to byte array.</p></div></div><div class="src-link"><a href="http://github.com/funcool/buddy-core/blob/master/src/buddy/core/crypto.clj#L569">view source</a></div></div><div class="public anchor" id="var-decrypt*"><h3><a href="#var-decrypt*">decrypt*</a></h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/funcool/buddy-core/blob/master/src/buddy/core/crypto.clj#L421">view source</a></div></div><div class="public anchor" id="var-encrypt"><h3><a href="#var-encrypt">encrypt</a></h3><div class="usage"><code>(encrypt input key iv)</code><code>(encrypt input key iv {:keys [algorithm], :or {algorithm :aes128-cbc-hmac-sha256}, :as options})</code></div><div class="doc"><div class="markdown"><p>Encrypt arbitrary length data using one of the supported encryption scheme. The default encryption scheme is: <code>:aes128-cbc-hmac-sha256</code>.</p><p>Example: <code>(encrypt &quot;hello world&quot; mykey myiv)</code></p><p>You can specify an other encryption scheme passing an additional parameter.</p><p>Example: <code>(encrypt &quot;hello world&quot; mykey myiv {:algorithm :aes128-cbc-hmac-sha512})</code></p><p>See the documentation for know the complete list of supported encryption schemes.</p><p>The input, key and iv parameters should be of any type that can be coerced to byte array.</p></div></div><div class="src-link"><a href="http://github.com/funcool/buddy-core/blob/master/src/buddy/core/crypto.clj#L546">view source</a></div></div><div class="public anchor" id="var-encrypt*"><h3><a href="#var-encrypt*">encrypt*</a></h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/funcool/buddy-core/blob/master/src/buddy/core/crypto.clj#L420">view source</a></div></div><div class="public anchor" id="var-get-block-size"><h3><a href="#var-get-block-size">get-block-size</a></h3><div class="usage"><code>(get-block-size engine)</code></div><div class="doc"><div class="markdown"><p>Given a block cipher, return the block size in bytes.</p></div></div><div class="src-link"><a href="http://github.com/funcool/buddy-core/blob/master/src/buddy/core/crypto.clj#L191">view source</a></div></div><div class="public anchor" id="var-get-output-size"><h3><a href="#var-get-output-size">get-output-size</a></h3><div class="usage"><code>(get-output-size engine len)</code></div><div class="doc"><div class="markdown"><p>Given a aead cipher, return the buffer size required for a <code>process-bytes!</code> plus a <code>calculate-authtag!</code> with an input of <code>len</code> bytes.</p></div></div><div class="src-link"><a href="http://github.com/funcool/buddy-core/blob/master/src/buddy/core/crypto.clj#L197">view source</a></div></div><div class="public anchor" id="var-IAEADBlockCipher"><h3><a href="#var-IAEADBlockCipher">IAEADBlockCipher</a></h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Common protocol to Authenticated Cipher.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var--auth-tag"><h3><a href="#var--auth-tag">-auth-tag</a></h3><div class="usage"><code>(-auth-tag _ output outoffset)</code></div><div class="doc"><div class="markdown"><p>Calculate the authentication tag.</p></div></div></div><div class="public anchor" id="var--output-size"><h3><a href="#var--output-size">-output-size</a></h3><div class="usage"><code>(-output-size _ data)</code></div><div class="doc"><div class="markdown"><p>Get the output size.</p></div></div></div></div></div><div class="src-link"><a href="http://github.com/funcool/buddy-core/blob/master/src/buddy/core/crypto.clj#L82">view source</a></div></div><div class="public anchor" id="var-IBlockCipher"><h3><a href="#var-IBlockCipher">IBlockCipher</a></h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Common protocol to block ciphers.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var--block-size"><h3><a href="#var--block-size">-block-size</a></h3><div class="usage"><code>(-block-size _)</code></div><div class="doc"><div class="markdown"><p>Get block size in bytes.</p></div></div></div></div></div><div class="src-link"><a href="http://github.com/funcool/buddy-core/blob/master/src/buddy/core/crypto.clj#L69">view source</a></div></div><div class="public anchor" id="var-ICipher"><h3><a href="#var-ICipher">ICipher</a></h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Common protocol to both, stream and block ciphers.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var--init"><h3><a href="#var--init">-init</a></h3><div class="usage"><code>(-init _ params)</code></div><div class="doc"><div class="markdown"><p>Initialize cipher</p></div></div></div><div class="public anchor" id="var--process-bytes"><h3><a href="#var--process-bytes">-process-bytes</a></h3><div class="usage"><code>(-process-bytes _ input)</code><code>(-process-bytes _ input inoffset output outoffset)</code></div><div class="doc"><div class="markdown"><p>Encrypt/Decrypt a block of bytes.</p></div></div></div></div></div><div class="src-link"><a href="http://github.com/funcool/buddy-core/blob/master/src/buddy/core/crypto.clj#L76">view source</a></div></div><div class="public anchor" id="var-initialize.21"><h3><a href="#var-initialize.21">initialize!</a></h3><div class="usage"><code>(initialize! engine {:keys [iv key op], :as params})</code></div><div class="doc"><div class="markdown"><p>Initialize the cipher engine.</p></div></div><div class="src-link"><a href="http://github.com/funcool/buddy-core/blob/master/src/buddy/core/crypto.clj#L220">view source</a></div></div><div class="public anchor" id="var-IStreamCipher"><h3><a href="#var-IStreamCipher">IStreamCipher</a></h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>Common protocol to stream ciphers.</p></div></div><div class="src-link"><a href="http://github.com/funcool/buddy-core/blob/master/src/buddy/core/crypto.clj#L73">view source</a></div></div><div class="public anchor" id="var-process-block.21"><h3><a href="#var-process-block.21">process-block!</a></h3><div class="usage"><code>(process-block! engine input)</code><code>(process-block! engine input inoffset output outoffset)</code></div><div class="doc"><div class="markdown"><p>Encrypt or decrypt a block of bytes using the specified engine. The length of the block to encrypt or decrypt depends on the used crypto engine. A great example are stream cipher engine that allows blocks of 1 byte lenght. This is an alias to `process-bytes! function.</p></div></div><div class="src-link"><a href="http://github.com/funcool/buddy-core/blob/master/src/buddy/core/crypto.clj#L235">view source</a></div></div><div class="public anchor" id="var-process-bytes.21"><h3><a href="#var-process-bytes.21">process-bytes!</a></h3><div class="usage"><code>(process-bytes! engine input)</code><code>(process-bytes! engine input inoffset output outoffset)</code></div><div class="doc"><div class="markdown"><p>Encrypt or decrypt a block of bytes using the specified engine. The length of the block to encrypt or decrypt depends on the used crypto engine. A great example are stream cipher engine that allows blocks of 1 byte lenght.</p></div></div><div class="src-link"><a href="http://github.com/funcool/buddy-core/blob/master/src/buddy/core/crypto.clj#L225">view source</a></div></div><div class="public anchor" id="var-split-by-blocksize"><h3><a href="#var-split-by-blocksize">split-by-blocksize</a></h3><div class="usage"><code>(split-by-blocksize input blocksize)</code><code>(split-by-blocksize input blocksize additional)</code></div><div class="doc"><div class="markdown"><p>Split a byte array in blocksize blocks.</p><p>Given a arbitrary size bytearray and block size in bytes, returns a lazy sequence of bytearray blocks of blocksize size. If last block does not have enought data for fill all block, it is padded using zerobyte padding.</p></div></div><div class="src-link"><a href="http://github.com/funcool/buddy-core/blob/master/src/buddy/core/crypto.clj#L250">view source</a></div></div><div class="public anchor" id="var-stream-cipher"><h3><a href="#var-stream-cipher">stream-cipher</a></h3><div class="usage"><code>(stream-cipher alg)</code></div><div class="doc"><div class="markdown"><p>Stream cipher engine constructor.</p></div></div><div class="src-link"><a href="http://github.com/funcool/buddy-core/blob/master/src/buddy/core/crypto.clj#L213">view source</a></div></div></section></section></body></html>